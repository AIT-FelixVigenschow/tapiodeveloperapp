<div>
  <h3 class="title is-3">Item Data</h3>
  <ngx-datatable [rows]="itemData$ | async" [columnMode]="'flex'" [loadingIndicator]="isLoading" [scrollbarH]="true" #itemData>
    <ngx-datatable-column name="k" [flexGrow]="2" [resizeable]="false">
        <ng-template let-column="column" ngx-datatable-header-template>
          <span>Key ({{column.name}})</span>
        </ng-template>
        <ng-template let-value="value" ngx-datatable-cell-template>
          {{value}}
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="v" [flexGrow]="2" [resizeable]="false">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span>Value ({{column.name}})</span>
      </ng-template>
      <ng-template let-value="value" ngx-datatable-cell-template>
        {{value | json}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="p" [flexGrow]="1" [resizeable]="false">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span>Provider ({{column.name}})</span>
      </ng-template>
      <ng-template let-value="value" ngx-datatable-cell-template>
          {{value}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="q" [flexGrow]="1" [resizeable]="false">
        <ng-template let-column="column" ngx-datatable-header-template>
          <span>Quality ({{column.name}})</span>
        </ng-template>
        <ng-template let-value="value" ngx-datatable-cell-template>
          {{value}}
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="rts" [flexGrow]="1" [resizeable]="false">
        <ng-template let-column="column" ngx-datatable-header-template>
          <span>Receive Time Stamp ({{column.name}})</span>
        </ng-template>
        <ng-template let-value="value" ngx-datatable-cell-template>
          {{ value | date: 'medium' }}
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="sts" [flexGrow]="1" [resizeable]="false">
        <ng-template let-column="column" ngx-datatable-header-template>
          <span>Source Time Stamp ({{column.name}})</span>
        </ng-template>
        <ng-template let-value="value" ngx-datatable-cell-template>
          {{ value | date: 'medium' }}
        </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="dvt" [flexGrow]="1" [resizeable]="false">
        <ng-template let-column="column" ngx-datatable-header-template>
          <span>Data Value Type ({{column.name}})</span>
        </ng-template>
        <ng-template let-value="value" ngx-datatable-cell-template>
          {{value}}
        </ng-template>
    </ngx-datatable-column>
  </ngx-datatable>
  <ng-container *ngTemplateOutlet="showError">
  </ng-container>
</div>
<div>
  <h3 class="title is-3">Conditions</h3>
  <ngx-datatable [rows]="conditions$ | async" [columnMode]="'flex'" [loadingIndicator]="isLoading" [scrollbarH]="true" #conditions>
      <ngx-datatable-column name="k" [flexGrow]="2" [resizeable]="false">
          <ng-template let-column="column" ngx-datatable-header-template>
            <span>Key ({{column.name}})</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
            {{value}}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="p" [flexGrow]="1" [resizeable]="false">
          <ng-template let-column="column" ngx-datatable-header-template>
            <span>Provider ({{column.name}})</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
            {{value}}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="s" [flexGrow]="2" [resizeable]="false">
          <ng-template let-column="column" ngx-datatable-header-template>
            <span>Source ({{column.name}})</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
            {{value}}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="as" [flexGrow]="1" [resizeable]="false">
          <ng-template let-column="column" ngx-datatable-header-template>
            <span>Active State ({{column.name}})</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
            {{value}}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="sv" [flexGrow]="1" [resizeable]="false">
          <ng-template let-column="column" ngx-datatable-header-template>
            <span>Severity ({{column.name}})</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
            {{value}}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="lm" [flexGrow]="2" [resizeable]="false">
          <ng-template let-column="column" ngx-datatable-header-template>
            <span>Localized message text ({{column.name}})</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
            {{value | json}}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="ls" [flexGrow]="2" [resizeable]="false">
          <ng-template let-column="column" ngx-datatable-header-template>
            <span>Localized source text ({{column.name}})</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
            {{value | json}}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="vls" [flexGrow]="2" [resizeable]="false">
          <ng-template let-column="column" ngx-datatable-header-template>
            <span>Additional Value List ({{column.name}})</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
            {{value | json}}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="rts" [flexGrow]="2" [resizeable]="false">
          <ng-template let-column="column" ngx-datatable-header-template>
            <span>Receive Time Stamp ({{column.name}})</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
            {{ value | date: 'medium' }}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="sts" [flexGrow]="2" [resizeable]="false">
          <ng-template let-column="column" ngx-datatable-header-template>
            <span>Source Time Stamp ({{column.name}})</span>
          </ng-template>
          <ng-template let-value="value" ngx-datatable-cell-template>
            {{ value | date: 'medium' }}
          </ng-template>
      </ngx-datatable-column>
  </ngx-datatable>
  <ng-container  *ngTemplateOutlet="showError">
  </ng-container>
</div>

<ng-template #showError>
  <div *ngIf="hasError" class="message is-danger is-small">
    <div class="message-body">
      Could not retrieve machine's Item Data and Conditions from the server.
    </div>
  </div>
</ng-template>
